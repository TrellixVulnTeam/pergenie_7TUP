{% extends "layout.html" %}
{% block title %}Upload{% endblock %}
{% block description %}upload genome file{% endblock %}
<!-- {% block cookie_id %}upload{% endblock %} -->
{% load staticfiles %}

{% block main_container %}

<!-- show and hide column -->

<!-- <script type="text/javascript" charset="utf-8"> -->
<!--   $(document).ready(function() { -->
<!--   $('#datatable').dataTable( { -->
<!--   "sScrollY": "200px", -->
<!--   "bPaginate": false -->
<!--   } ); -->
<!--   } ); -->

<!--   function fnShowHide( iCol ) -->
<!--   { -->
<!--   /* Get the DataTables object again - this is not a recreation, just a get of the object */ -->
<!--   var oTable = $('#datatable').dataTable(); -->

<!--   var bVis = oTable.fnSettings().aoColumns[iCol].bVisible; -->
<!--   oTable.fnSetColumnVis( iCol, bVis ? false : true ); -->
<!--   } -->
<!--   </script> -->

<!-- <a href="javascript:void(0);" onclick="fnShowHide(0);">Toggle column 1<br></a> -->
<!-- <a href="javascript:void(0);" onclick="fnShowHide(1);">Toggle column 2<br></a> -->
<!-- <a href="javascript:void(0);" onclick="fnShowHide(2);">Toggle column 3<br></a> -->
<!-- <a href="javascript:void(0);" onclick="fnShowHide(3);">Toggle column 4<br></a> -->
<!-- <a href="javascript:void(0);" onclick="fnShowHide(4);">Toggle column 5<br></a> -->


<div id="main_container" class="span10">

  <!-- Breadcrumb -->
  <div class="row-fluid">
    <div class="span12">
      <ul class="breadcrumb">
        <li>Upload</li>
      </ul>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12">
      <div class="box grad_colour_dark_blue">
        <h2 class="box_head round_top"></h2>
        <a href="#" class="toggle box_button_2" title="toggle">&nbsp;</a>
        <a href="#" class="destroy box_button_1" title="close">&nbsp;</a>
        <div class="toggle_container">
          <div class="block box_content round_bottom padding_20">

                <form class="form-horizontal" action="{% url apps.upload.views.index %}" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
		          <fieldset>
                    <div class="page-header">
                      <h1>Upload <small></small></h1>
                    </div>
                  
                    <p>Before upload your genome files, see the description below:</p>
                    <div class="tooltip-demo well">
                      <p class="muted" style="margin-bottom: 0;">Tight pants next level keffiyeh <a href="#" rel='tooltip' title="first tooltip">you probably</a> haven't heard of them. Photo booth beard raw denim letterpress vegan messenger bag stumptown. Farm-to-table seitan, mcsweeney's fixie sustainable quinoa 8-bit american apparel <a href="#" rel='tooltip' title='Another tooltip'>have a</a> terry richardson vinyl chambray. Beard stumptown, cardigans banh mi lomo thundercats. Tofu biodiesel williamsburg marfa, four loko mcsweeney's cleanse vegan chambray. A <a href="#" rel='tooltip' title='Another one here too'>really ironic</a> artisan whatever keytar, scenester farm-to-table banksy Austin <a href="#" rel='tooltip' title='The last tip!'>twitter handle</a> freegan cred raw denim single-origin coffee viral.
                      </p>
                    </div>

  
                    <div class="control-group">
                      <label class="control-label">Genome File</label>
                      <div class="controls">
                      <input type="file" name="call">
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label">Population</label>
                      <div class="controls">
                        <select name="population">
                          <option value="unkown">Unkown</option>
                          <option value="Asian">Asian</option>
                          <option value="Europian">Europian</option>
                          <option value="Japanese">Japanese</option>
                        </select>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label">Sex</label>
                      <div class="controls">
                        <select name="sex">
                          <option value="unkown">Unkown</option>
                          <option value="male">male</option>
                          <option value="female">female</option>
                        </select>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label">File Format</label>
                      <div class="controls">
                        <select name="file_format">
                          <option value="andme">23andMe</option>
                          <option value="decode">deCODEme</option>
                          <option value="navi">Navigenics</option>
                          <option value="vcf">VCF</option>
                          <option value="tmmb">tmmb</option>
                        </select>
                      </div>
                    </div>

                    <div class="form-actions">
                      <input type="submit" class="btn btn-primary">
                      <input type="reset" value="reset" class="btn">
                    </div>

                    {% if msg %}
                    <div class="alert alert-success">
                      <!-- <button type="button" class="close" data-dismiss="alert">×</button> -->
                      {{ msg }}
                    </div>
                    {% endif %}

                    {% if err %}
                    <div class="alert alert-error">
                      <!-- <button type="button" class="close" data-dismiss="alert">×</button> -->
                      {{ err }}
                    </div>
                    {% endif %}



                  </fieldset>

                </form>
              </div>
            </div>
          </div>
    </div><!--/span-->
  </div><!--/row-->

  <div class="row-fluid">
    <div class="span12">
      <div class="box grad_colour_dark_blue">
        <h2 class="box_head round_top">Uploaded status</h2>
        <a href="#" class="toggle box_button_2" title="toggle">&nbsp;</a>
        <a href="#" class="destroy box_button_1" title="close">&nbsp;</a>
        <div class="toggle_container">
          <div class="block box_content round_bottom padding_20">
            

            <table class="table table-striped table-condensed">
              <thead>
              <tr>
                <th>File Name</th>
                <th>Date</th>
                <th>Population</th>
                <th>Sex</th>
                <th>Format</th>
                <th>Status</th>
                <th></th>
              </tr>
              </thead>

              <tbody>
                {% if uploadeds %}
                {% for uploaded in uploadeds %}

                <tr class="uploaded_file">
                  <td class="dataname">{{ uploaded.name }}</td>
                  <td class="center">{{ uploaded.date }}</td>
                  <td class="center">
                    <span class="label label-success">{{ uploaded.population }}</span>
                  </td>
                  <td class="center">
                    <span class="label label-success">{{ uploaded.sex }}</span>
                  </td>
                  <td class="center">
                    <span class="label label-success">{{ uploaded.file_format }}</span>
                  </td>
                  <td class="center">
		            {% if uploaded.status >= 100 %}
                    <p>100%</p>
<!--                     <div class="progress progress-success"> -->
<!-- 		              <div class="bar" style="width: 100%;">100%</div> -->
<!-- 		            </div> -->


		            {% else %}
                    <div class="progress progress-striped progress-info active">
		              <div class="bar" style="width: {{ uploaded.status }}%;"></div>
                    </div>
		            {% endif %}
                  </td>
                  <td class="center">
                    <!-- <a class="btn btn-success" href="#"> -->
                    <!--   <i class="icon-zoom-in icon-white"></i> -->
                    <!--   View -->
                    <!-- </a> -->
                    <!-- <a class="btn btn-info" href="#"> -->
                    <!--   <i class="icon-edit icon-white"></i> -->
                    <!--   Edit -->
                    <!-- </a> -->
                    <div id="deleteModal{{ forloop.counter }}" class="modal hide fade in delete" style="display: none;">
                      <div class="modal-header"></div>
                      <div class="modal-body"><p>Really delete "{{ uploaded.name }}"?</p></div>
                      <div class="modal-footer">
                        <button class="btn" data-dismiss="modal">No.</button>
                        <button class="btn btn-primary delete" href="#" id="{{ uploaded.name }}">Yes, delete this data.</button>
                      </div>
                    </div>
                    {% if uploaded.status %}
                    <a data-toggle="modal" href="#deleteModal{{ forloop.counter }}" class="btn btn-danger">
                      <i class="icon-trash icon-white"></i>Delete
                    {% else %}
                    <a href="#" class="btn btn-danger disabled">
                      <i class="icon-trash icon-white"></i>Delete
                    {% endif%}
		          </td>
		        </tr>
		        {% endfor %}
		        {% endif %}
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript">window.upload_delete_url = "{% url apps.upload.views.delete %}";</script>
<script type="text/javascript">window.upload_status_url = "{% url apps.upload.views.status %}";</script>
<script type="text/javascript" src="{% static 'js/upload.js' %}"></script>
{% endblock %}
