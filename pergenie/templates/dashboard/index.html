{% extends "layout/layout.html" %}
{% load extras %}
{% load staticfiles %}
{% block title %}Dashboard{% endblock %}
{% block description %}perGENIE dashboard{% endblock %}
{% load i18n %}

{% block main %}
<section id="main">
  <div class="container">
    <div class="content-box no-box-shadow transparent">
      <div class="content-box-header">
        <i class="icon-magic"></i> Components
      </div>
      <div class="row-fluid">
        <div class="span12 padded5">
          <button class="button square" href="#">
            <i class="icon-align-left icon-large"></i>
            <span class="button-text">RiskReport</span>
          </button>

          <button class="button square" href="#">
            <i class="icon-upload-alt icon-large"></i>
            <span class="button-text">Upload</span>
          </button>
        </div>
      </div>
    </div>

    <div class="row-fluid">
      <!--  -->
      <div class="span4">
        <div class="content-box">
          <div class="content-box-header">
            <i class="icon-folder-open"></i> {% trans "Your Genome Files" %}
          </div>

          <table class="table projects-table">
            <thead>
              <tr>
                <th width="20%">Title</th>
                <th width="60">Progress</th>
                <th width="20%"></th>
              </tr>
            </thead>
            <tbody>

              <tr>
                <td class="project-title center" >EventManager</td>
                <td class="center">
                  <div class="progress progress-danger">
                    <div class="bar" style="width: 25%;"></div>
                  </div>
                </td>

                <td class="center ">
                  <a class="btn btn-mini btn-green" href="#">
                    <i class="icon-zoom-in icon-white"></i>
                  </a>
                  <a class="btn btn-mini btn-orange" href="#">
                    <i class="icon-edit icon-white"></i>
                  </a>
                  <a class="btn btn-mini btn-red" href="#">
                    <i class="icon-trash icon-white"></i>
                  </a>
                </td>
              </tr>

              <tr>
                <td class="project-title center" >ProjectY</td>
                <td class="center">
                  <div class="progress progress-success">
                    <div class="bar sun-blue" style="width: 100%;"></div>
                  </div>
                </td>

                <td class="center ">
                  <a class="btn btn-mini btn-green" href="#">
                    <i class="icon-zoom-in icon-white"></i>
                  </a>
                  <a class="btn btn-mini btn-orange" href="#">
                    <i class="icon-edit icon-white"></i>
                  </a>
                  <a class="btn btn-mini btn-red" href="#">
                    <i class="icon-trash icon-white"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- TODO: view more -->
          <!-- <ul class="latest-comments"> -->
          <!--   <li class="comment-box view-more" style="text-align: center"> -->
          <!--     <a href="#">View more...</a> -->
          <!--   </li> -->
          <!-- </ul> -->
        </div>
      </div>

      <!--  -->
      <div class="span8">
        <div class="content-box">
          <div class="content-box-header">
            <i class="icon-retweet"></i> {% trans "Recently Added Studies" %}
          </div>

          <div class="row-fluid">
            <div class="span12">
              <ul class="latest-comments">
                <li class="comment-box">
                  <!-- TODO: icons -->
                  <!-- <div class="avatar user1 pull-left"></div> -->
                  <div class="article">
                    <div class="post-info"> Mike, 24 minutes ago </div>
                    <div class="post-content">
                      <b>{% trans "Trait: " %}</b>{{ record.trait }} ({{ record.added|date }})
                      <b>{% trans "Study: " %}</b>{{ record.study }} <a href="{{ record.pubmed_link }}" target="_blank"><span class="label label-info">Pubmed</span></a>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block js %}
<link href="{% static 'css/introjs.css' %}" rel="stylesheet">
<script type="text/javascript" src="{% static 'js/intro.js' %}"></script>
<script type="text/javascript">
    function startIntro(){

        var intro_type = '{{ intro_type }}';

        var intro_contents = {
            'demo_welcome': {
                steps: [
                    {
                        element: document.querySelectorAll('.content-box')[0],
                        intro: "{% trans 'Welcome to perGENIE!' %}"
                    },
                    {
                        element: document.querySelectorAll('.content-box')[1],
                        intro: "{% trans 'Genome files are already uploaded for demo users.' %}",
                        position: 'right'
                    },
                    {
                        element: document.querySelector('#riskreport-button'),
                        intro: "{% trans 'So, you can check disease risk report, right now!' %}",
                        position: 'right'
                    }
                ]
            },

            'demo_invitation': {
                steps: [
                    {
                        element: document.querySelectorAll('.content-box')[0],
                        intro: "{% trans 'Did you have fun with perGENIE?' %}"
                    },
                    {
                        element: document.querySelector('.navbar-right'),
                        intro: "{% trans 'Thanks for trying this demo!' %}",
                    }
                ]
            },

            'welcome': {
                steps: [
                    {
                        element: document.querySelectorAll('.content-box')[0],
                        intro: "{% trans 'Welcome to perGENIE!' %}"
                    },
                    {
                        element: document.querySelectorAll('.content-box')[1],
                        intro: "{% trans 'You have no genome files uploaded.' %}",
                        position: 'right'
                    },
                    {
                        element: document.querySelector('#upload-button'),
                        intro: "{% trans 'So, first, upload your genome file!' %}",
                    }
                ]
            },

            'wait_upload': {
                steps: [
                    {
                        element: document.querySelectorAll('.content-box')[1],
                        intro: "{% trans 'Please wait until your genome file uploaded...' %}",
                        position: 'right'
                    }
                ]
            },

            'finish_upload': {
                steps: [
                    {
                        element: document.querySelector('#riskreport-button'),
                        intro: "{% trans 'Browse your Risk Report!' %}"
                    }
                ]
            }
        };

        // init
        var intro = introJs();
        intro.setOptions(intro_contents[intro_type]);
        intro.start();
    }
</script>
<script type="text/javascript">$(function(){startIntro();});</script>
<script type="text/javascript">window.upload_status_url = "#";</script>
<script type="text/javascript" src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}
